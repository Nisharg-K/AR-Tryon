<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Face AR ‚Äì Glasses Try‚ÄëOn with Multiple Frames</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="wrap">
    <div class="title">
      <h1>Face AR ‚Äì Glasses Try‚ÄëOn with Multiple Frames</h1>
      <span class="badge">WebGL + MediaPipe Face Mesh</span>
      <span class="badge">PNG Frame Support</span>
    </div>

    <div class="grid">
      <section class="card">
        <h2>Live Preview</h2>
        <div class="stage" id="stage">
          <video id="video" playsinline class="hidden"></video>
          <canvas id="overlay"></canvas>
        </div>
        <div class="controls">
          <div class="row">
            <button class="btn primary" id="startBtn">Start Camera</button>
            <button class="btn" id="stopBtn" disabled>Stop</button>
            <button class="btn" id="snapBtn" disabled>Capture</button>
            <label class="switch"><input type="checkbox" id="debugToggle"><span>Show Landmarks</span></label>
          </div>
          <div class="row meter">
            <label for="scale">Glasses scale</label>
            <input type="range" min="0.6" max="1.8" value="1.0" step="0.02" id="scale">
            <span id="scaleVal">1.00√ó</span>
          </div>
          <div class="row meter">
            <label for="offsetX">Horizontal offset</label>
            <input type="range" min="-30" max="30" value="0" step="1" id="offsetX">
            <span id="offsetXVal">0px</span>
          </div>
          <div class="row meter">
            <label for="tilt">Tilt adjustment</label>
            <input type="range" min="-15" max="15" value="0" step="0.5" id="tilt">
            <span id="tiltVal">0¬∞</span>
          </div>
          <div class="row meter">
            <label for="smooth">Stabilization</label>
            <input type="range" min="0" max="0.9" value="0.6" step="0.05" id="smooth">
            <span id="smoothVal">0.60</span>
          </div>
          <div class="row">
            <span class="cred">All processing runs locally in your browser. No video is uploaded.</span>
          </div>
        </div>
        <div class="foot">If video appears frozen, click <strong>Stop</strong> then <strong>Start</strong> again or check camera permissions.</div>
      </section>

      <aside class="card">
        <div class="tabs">
          <button class="tab active" data-tab="frames">Frames</button>
          <button class="tab" data-tab="settings">Settings</button>
          <button class="tab" data-tab="snapshots">Snapshots</button>
        </div>
        
        <div class="aside">
          <div class="tab-content active" id="frames-tab">
            <div class="upload-area" id="uploadArea">
              <div>üìÅ Drop PNG files here or click to browse</div>
              <div class="notice">Upload transparent PNG glasses frames</div>
              <input type="file" id="frameUpload" accept=".png" multiple>
            </div>
            
            <div class="frame-picker" id="framePicker">
              <!-- Frames will be added here -->
            </div>
          </div>
          
          <div class="tab-content" id="settings-tab">
            <div class="row meter">
              <label for="offsetY">Vertical (Y) offset</label>
              <input type="range" min="-30" max="30" value="0" step="1" id="offsetY">
              <span id="offsetYVal">0px</span>
            </div>
            <div class="row meter">
              <label for="offsetX">Horizontal (X) offset</label>
              <input type="range" min="-30" max="30" value="0" step="1" id="offsetX">
              <span id="offsetXVal">0px</span>
            </div>
            <div class="row meter">
              <label for="tilt">Tilt adjustment</label>
              <input type="range" min="-15" max="15" value="0" step="0.5" id="tilt">
              <span id="tiltVal">0¬∞</span>
            </div>
            <div class="row meter">
              <label for="scale">Scale</label>
              <input type="range" min="0.6" max="2.0" value="1.0" step="0.02" id="scaleSettings">
              <span id="scaleSettingsVal">1.00√ó</span>
            </div>
            <div class="notice">Fine-tune glasses positioning and size</div>
          </div>
          
          <div class="tab-content" id="snapshots-tab">
            <p class="notice">Use <em>Capture</em> to save frames. Images stay on this page.</p>
            <div id="shots" class="snapshots"></div>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <!-- Libraries: MediaPipe Face Mesh + helper utils -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh@0.4/face_mesh.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.3/camera_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils@0.3/drawing_utils.js"></script>


  <script src="script.js"></script>
 
</body>
</html>